var MyAjax = function () { function t() { this.xmlHttpReg = null; if (window["ActiveXObject"]) { this.xmlHttpReg = new window["ActiveXObject"]("Microsoft.XMLHTTP") } else if (XMLHttpRequest) { this.xmlHttpReg = new XMLHttpRequest } } t.prototype.get = function (t, i) { var e = this; this.callback = i; if (!!this.xmlHttpReg) { this.xmlHttpReg.open("get", t, true); this.xmlHttpReg.send(null); this.xmlHttpReg.onreadystatechange = function (t) { return e.doResult() } } }; t.prototype.post = function (t, i, e) { var o = this; this.callback = e; if (!!this.xmlHttpReg) { this.xmlHttpReg.open("POST", t, true); this.xmlHttpReg.setRequestHeader("content-type", "application/json"); this.xmlHttpReg.send(JSON.stringify(i)); this.xmlHttpReg.onreadystatechange = function (t) { return o.doResult() } } }; t.prototype.put = function (t, i, e) { var o = this; this.callback = e; if (!!this.xmlHttpReg) { this.xmlHttpReg.open("PUT", t, true); this.xmlHttpReg.setRequestHeader("content-type", "application/json"); this.xmlHttpReg.send(JSON.stringify(i)); this.xmlHttpReg.onreadystatechange = function (t) { return o.doResult() } } }; t.prototype.doResult = function () { if (this.xmlHttpReg.readyState === 4) { if (this.xmlHttpReg.status === 200 || this.xmlHttpReg.status === 201) { try { this.callback(JSON.parse(this.xmlHttpReg.responseText)) } catch (t) { } } } }; t.prototype.postFormData = function (t, i, e) { var o = this; this.callback = e; if (!!this.xmlHttpReg) { this.xmlHttpReg.open("POST", t, true); this.xmlHttpReg.setRequestHeader("content-type", "application/x-www-form-urlencoded"); this.xmlHttpReg.send(i); this.xmlHttpReg.onreadystatechange = function (t) { return o.doResult() } } }; return t }(); var IcsWebSdkJs = function () { function t(t) { this.ajax = t; this.baseUrl = "https://bot.4paradigm.com/"; this.top = ""; this.bottom = ""; this.left = ""; this.right = ""; this.closeIconUrl = this.baseUrl + "web/assets/icon-close.svg"; this.iconHoverPic = ""; this.iconPic = ""; this.iconWidth = ""; this.iconHeight = ""; this.robotHead = ""; this.userHead = ""; this.nickName = ""; this.isInit = false; this.initHeight = 0; this.innerWidth = 0; this.isPhone = false; this.url = ""; this.dialogColor = ""; this.fontColor = ""; this.backColor = ""; this.sendBtnColor = ""; this.headerFontColor = ""; this.funList = []; this.isDown = false; this.moveType = "left"; this.moveType1 = "top"; this.invitationShowNumber = 0; this.webSetData = { btnType: "1", btnColor: "#bbbfc3", btnImage: "https://bot.4paradigm.com/web/assets/xiaoshi2.png", hoverBtnImage: "https://bot.4paradigm.com/web/assets/xiaoshi1.png", btnImageWidth: "85px", btnImageHeight: "100px", left: "", right: "", top: "", bottom: "", dialogColor: "#E6F0FB", fontColor: "#354052", backColor: "#f7f8fa", sendBtnColor: "#3ba1ff", width: "", height: "", headerFontColor: "#a8b7c7" } } t.prototype.creatVisitor = function (t, i, e) { var o = this; i.source = location.origin || location.protocol + "//" + location.host; if (this.getIsInit()) { console.warn("åªèƒ½åœ¨åˆå§‹åŒ–ä¹‹å‰æ–°å»ºvisitor!"); return } else { var n = t.split("/"); this.robotId = n[n.length - 1]; this.tenantId = n[n.length - 2]; this.ajax.post(this.baseUrl + "v1/tenants/" + this.tenantId + "/visitors/robots/" + this.robotId, i, function (t) { o.visitorId = t.visitorId; e(t.visitorId) }) } }; t.prototype.getIsInit = function () { return !!document.getElementById("4paradigmBotIfram") }; t.prototype.init = function (o, n, s, a, l, d) { var y = this; if (s === void 0) { s = this.visitorId } if (d === void 0) { d = false } this.baseUrl = o.substring(0, o.indexOf("web")); if (!!this.dom) { } var t = o.split("/"); this.robotId = t[t.length - 1]; this.tenantId = t[t.length - 2]; this.ajax.get(this.baseUrl + "v1/tenants/" + this.tenantId + "/public_robot_info/" + this.robotId, function (t) { !!t.fontendSetting && (y.webSetData = JSON.parse(t.fontendSetting)); y.webSetData.height !== "" && (y.webSetData.height += "px"); y.webSetData.width !== "" && (y.webSetData.width += "px"); if (!!y.iconPic || !!y.iconHoverPic || !!y.iconWidth || !!y.iconHeight) { y.webSetData.btnType = 1 } y.dialogColor = y.dialogColor || y.webSetData.dialogColor || '#E6F0FB"'; y.fontColor = y.fontColor || y.webSetData.fontColor || "#354052"; y.backColor = y.backColor || y.webSetData.backColor || "#f7f8fa"; y.sendBtnColor = y.sendBtnColor || y.webSetData.sendBtnColor || "#3ba1ff"; y.headerFontColor = y.headerFontColor || y.webSetData.headerFontColor || "#a8b7c7"; y.top = y.top || y.webSetData.top || "unset"; y.left = y.left || y.webSetData.left || "unset"; y.right = y.right || y.webSetData.right || "unset"; y.bottom = y.bottom || y.webSetData.bottom || "unset"; y.height = y.height || y.webSetData.height || "520px"; y.width = y.width || y.webSetData.width || "540px"; y.iconPic = y.iconPic || y.webSetData.btnImage || "https://bot.4paradigm.com/web/assets/xiaoshi2.png"; y.iconHoverPic = y.iconHoverPic || y.webSetData.hoverBtnImage || "https://bot.4paradigm.com/web/assets/xiaoshi1.png"; y.iconWidth = y.iconWidth || y.webSetData.btnImageWidth || "85px"; y.iconHeight = y.iconHeight || y.webSetData.btnImageHeight || "100px"; !y.dom && (y.dom = document.createElement("div")); y.dom.style.position = "fixed"; y.dom.style.zIndex = "2019"; var i = encodeURIComponent(y.dialogColor + "-" + y.fontColor + "-" + y.backColor + "-" + y.sendBtnColor + "-" + y.headerFontColor); if (/\?/.test(o)) { o = o + ("&color=" + i) } else { o = o + ("?color=" + i) } if (s) { o = o + ("&visitorId=" + s) } if (a) { o = o + ("&userId=" + a) } if (l) { o = o + ("&groupId=" + l) } if (y.nickName) { o = o + ("&nickName=" + y.nickName) } if (d) { o += "&noCookie=" + d } y.url = o; y.isPhone = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent); switch (y.webSetData.btnType.toString()) { case "0": var e = y.iconWidth; if (y.isPhone && Number(y.iconWidth.replace("px", ""))) { e = Number(y.iconWidth.replace("px", "")) / window.devicePixelRatio + "px" } y.dom.innerHTML = '\n          <a class="ics-icon" style="\n          display: block;\n          background-repeat: no-repeat;\n          cursor: pointer;">\n        <img src="' + y.iconPic + '" \n        style="\n          width: ' + e + ';\n          max-width: 500px;\n          max-height: 500px;\n          ">\n          </a>'; break; case "1": y.dom.innerHTML = '\n       <a class="ics-icon" style="\n         display: block;\n        cursor: pointer;\n        width: ' + y.iconWidth + ";\n        height: " + y.iconHeight + ";\n        background-image: url(" + y.iconPic + ');\n        background-size: contain;\n        background-repeat: no-repeat;">\n        </a>'; break; case "2": y.dom.innerHTML = '\n        <a class="ics-icon" style="\n        text-align: center;\n        border-radius: 100%;\n        display: block;\n        cursor: pointer;\n        width: 40px;\n        height: 40px;\n        background-color: ' + y.webSetData.btnColor + ';\n        ">\n        <img \n        style="width: 26px;margin-top: 6px;"\n        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA8CAYAAAAzF3kIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTA5MjEwQkY0ODg4MTFFNkIwQ0VFMEJBQTc1Qjg5M0IiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTA5MjEwQzA0ODg4MTFFNkIwQ0VFMEJBQTc1Qjg5M0IiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFMEVEMjZCRTQ4ODUxMUU2QjBDRUUwQkFBNzVCODkzQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFMDkyMTBCRTQ4ODgxMUU2QjBDRUUwQkFBNzVCODkzQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pk9MkfQAAAS7SURBVHja3JpZbA1RGMent1RrqyJqr9hiCa3Ymqb21k5tkVgeLA8N0UgQCfEqES+IPZZ4IAhRQl+EIEGKSEWjNJbWLsRa1NL2+p/0u3IcM2fOzJ25M9N/8kvuzD1zMv/Mme9835kTFw6HtYasRg731wz0BT1AJ5AImoPP4D0oB6XgU1AMxoGhYDYYCzIU+qwFt8E5cAQ8cdUhG6I2aAFWgofh6FQHikCWzfswxeoFCaAAvAs7r1Ogq5cG08GdsLuqAou8MLgM/AzHTvtBYycMxplMEyyIbAMFHkT4CyAPfI8qCkoMMnO7Qb6H09h5MA38sttBSPLfRo/NMY0HB914gjPAKXqKfhB7RXY4ZbAtuAfa+Sjj+gbSwWMnhuhmn5mLpIC7nHiC/cBdEO/T3DmXoqvtJ7jGx+aYVkfzBJPBa5DkY4N1oCeosPMEp/jcXOR+59kdopMDUsNOsGtwaEAMDhbuOxNMMjOYSFV4EMSmjO5CAX2aUjpDg6kK0fMFyKH3lIXrSknbp2AUtc1RaJtLSxu5dGymDtzvHyABHNMdhVRWDFQoYSYKpchoSdvxQtscSdvRQttRCvcylWs/gDtfCVrx/YW4ysFMxcLxVUnbmybXyvq5qnAv8cKQjSgNbNcbol8VOh0uHGdJ2g4RjjMlbbMs9BtRtYFBpoVgpDhEUxWGxVMwBiSCcaBC0vYJyKa2Y+nYSBXUX1OFfiMayA3DPJ3/b+hV9NUUTYOgFtyoWw526rTJBtf4+eRBQMxVCK9Ub4N2y8WJ/mZADIpBqJ9Bu+mgCW/wckAMXuR+N5YEJTavZvIGi2jS9LPY4tNZIb1sJmmfwRv8As743OBx8IE7nmXSvr9Y8O7xucEtwmS/wKR9qmjwsmIm4YUKQQl3PBW0N7kmWW/RaRVVzn5SNS2naFxquV7hut96Bm9p9cv1ftJa7d/viHPBMIXrPhkt/LLy45pOTumFTlMwCXNrR2Wgo8K1u0OScDxTsTZzU8UUSPinsFXRHFOp2eenNJNE2U1dAS2F+8m32EeGyje2GR6YOwSShPuYYPEb5SsQCqlEohgOyY9gKVgk1HzjtPqPQQkW+jrKZoOQT6LkT7AX9NH+/1y2kNLIphb6Y9Mc+7bp+D4ZO6XPYTL3UviP1aYbaV62qpPgkZMGa8AJmoC7gs5UlCZTSfaLcl1mopxKs0uUmejNU2yJ44CkFJLp+z9JgEKQmWLyMl8HgxzaFdELHKX9M3a11uouCyODb8FiEBelqRCtxRSCGgemlni+fztDtJaqjg2a/T1nbOiOoIR5urCQa1fsnZtD9/dXVg0W01pHiXA+zSA3TKTV7RR6L7tRpOyhOfv9v5JWxd8ZrWybDVG2dWuJZDg2Aoc9ynjuU8Zle6dTF3E5XPIubYoyQFhVoU46Z2mnkx3NoXmtdQzm0VZa/V5UQ7mRybBJtj/Ni55vJ3YrVXvDFaVnxcgWS7kxRPXE6rf5FOmyLeaVUQ3RWBnUhNWwbrTknkILtCFKuNm+7md0fjsN9cAZVBUrjdZRXpnQEA1GxBLufZr+Er0nUdRplVFatwJU+SWKOi1WwO6kd7KoIRqM6Dkl6Gy301s/TRNuqA0V0dI1oz8CDACMCg+/vtOKFQAAAABJRU5ErkJggg==">\n        </a>\n        '; break; case "3": y.dom.innerHTML = '\n        <a class="ics-icon" style="\n        text-align: center;\n        border-radius: 5px;\n        display: block;\n        cursor: pointer;\n        width: 40px;\n        height: 40px;\n        background-color: ' + y.webSetData.btnColor + ';\n        ">\n        <img \n        style="width: 24px;margin-top: 9px;"\n        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAsCAYAAAAn4+taAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTBFRDI2QkM0ODg1MTFFNkIwQ0VFMEJBQTc1Qjg5M0IiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTBFRDI2QkQ0ODg1MTFFNkIwQ0VFMEJBQTc1Qjg5M0IiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFMEVEMjZCQTQ4ODUxMUU2QjBDRUUwQkFBNzVCODkzQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFMEVEMjZCQjQ4ODUxMUU2QjBDRUUwQkFBNzVCODkzQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkjfC2IAAAHrSURBVHja7JrNSgJRFMfHqdzUxlq074vaBiUE9QB9ES2LFkW01GW9Qj1EbSqCVpkStXSRtLFlReIDBOUmiSZ0+t84xnS9jmOO0xybAz+Q63U8v/F+zcGQaZpandDBNJgHUTACIiCsuRMigSfQ38Q1Hjpt3uwAG2AHDGiti1CTEiIStURGwREY13iEUmQOnIAeJhJiWF7LIovg1MXx70UkQVm3NIyBY2YSIs4rK1JlYh+CbmYSb+DSKrLOaGJb44pkvkR0WmI5xrl1s5sBgwwlyrLILNNfI0NL77fIFFORM/kcNcR9flREIkxF7mWRsNYGoWttEoFIIBKIuCdigDjoA7302vCgn8Mnf+cRF4UKiW0P+tWKH58NmQ7KKBTizr1IbeJOPre4n13R4n/PkTVF26YH/VyfI+8gBiJEjNpa3c/1OeK3COZIIOKViMEwb0MlUmAoUlCJ5BiK5FQiGaaloCqRFEORlEokzWx45SjnKhFRetxlJLJHOSv3kQOQZSBxC/btNsQSWAVFH0sUKcdSvZ1dVO5WfLpBflBud06PKAmwBF59JCFyWabcGjprXYAJn8yZLOWS/O2hUQyzSbAF8n8gkKfvjmpSsbrmw0kDf+FYoAsPU5Ggy8XxL4oQj+CG7n5atcTaxacAAwB+CdYKmKn7WQAAAABJRU5ErkJggg=="\n        </a>\n        '; break; case "4": y.dom.innerHTML = '\n        <a class="ics-icon" style="\n        display: block;\n        cursor: pointer;\n        padding: 2px 5px;\n        background-color: ' + y.webSetData.btnColor + ';\n        border-radius: 5px 5px 2px 2px;\n        font-size: 12px;\n        line-height: 18px;\n        color: white;\n        ">\n        <img \n        style="width: 12px;position: relative;top: 2px;"\n        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTBFRDI2Qjg0ODg1MTFFNkIwQ0VFMEJBQTc1Qjg5M0IiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTBFRDI2Qjk0ODg1MTFFNkIwQ0VFMEJBQTc1Qjg5M0IiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFMEVEMjZCNjQ4ODUxMUU2QjBDRUUwQkFBNzVCODkzQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFMEVEMjZCNzQ4ODUxMUU2QjBDRUUwQkFBNzVCODkzQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsHxHgUAAAGpSURBVHjaxJe9SgNBFIUnK/6goGlMEATFxiJdQB/AmGyhtdGXUGsbfQaNsfIBRLSyEZ9ABLE0agSRSNygiIWIPxnPDTcSlsxmNDuTAx8s2Zt7uLMzd2YiUkqhoW7ggjSYAhMgyu9ewC04AyfgGHy2zEjGAUTBOvCkvipgg/+rzB1kugjK8v8qcw5t4y6Qk+EpzzkDjSlgX4avA7+533hLmlNOZZyV5pWt+0V4OdHSuARxYVYemKQl6PAPKxZMSTGwSg9UMTWHEhgWdlQBo1RxxqKpYK+0w62wmWZoRNokpcjtknFS8bIaQnWqjSBJ39izPNS170wVDwn7GiRjpwPGNdPnDvi+kvG1ZnBKcya7GrmuyPhU0/hdM+5DI+acZvUcHo4sD/U8Gffg4Z77qNWWSUOzabHaPHnWt8V+cANGbG+Lb+DJQrXLfBz+bR5UacKw6TbYa2wgjWvUlA75sCH8xhmDpjtgAXw3u0mUfIeyKrgAD20c7B5bHegTHHgHdsESiHHAAFjjJKFeYWg5jaHwPlAIGK5eMMt9eBqM8x7+xbO0+NdL248AAwBK+LRaPsoZjAAAAABJRU5ErkJggg=="/>\n        &#x5728;&#x7ebf;&#x5ba2;&#x670d;\n        </a>\n        '; break; case "5": y.dom.innerHTML = '\n       <a class="ics-icon" style="\n         display: block;\n        cursor: pointer;\n        width: ' + y.iconWidth + ";\n        height: " + y.iconHeight + ";\n        background-image: url(" + y.iconPic + ');\n        background-size: contain;\n        background-repeat: no-repeat;">\n        </a>'; break; case "6": y.dom.innerHTML = '\n        <a class="ics-icon" style="\n        width: 14px;\n        display: block;\n        cursor: pointer;\n        padding: 5px;\n        background-color: ' + y.webSetData.btnColor + ';\n        border-radius: 5px 5px 2px 2px;\n        font-size: 12px;\n        line-height: 18px;\n        color: white;\n        ">\n        <img \n        style="width: 12px;position: relative;top: 2px;"\n        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTBFRDI2Qjg0ODg1MTFFNkIwQ0VFMEJBQTc1Qjg5M0IiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTBFRDI2Qjk0ODg1MTFFNkIwQ0VFMEJBQTc1Qjg5M0IiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFMEVEMjZCNjQ4ODUxMUU2QjBDRUUwQkFBNzVCODkzQiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFMEVEMjZCNzQ4ODUxMUU2QjBDRUUwQkFBNzVCODkzQiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsHxHgUAAAGpSURBVHjaxJe9SgNBFIUnK/6goGlMEATFxiJdQB/AmGyhtdGXUGsbfQaNsfIBRLSyEZ9ABLE0agSRSNygiIWIPxnPDTcSlsxmNDuTAx8s2Zt7uLMzd2YiUkqhoW7ggjSYAhMgyu9ewC04AyfgGHy2zEjGAUTBOvCkvipgg/+rzB1kugjK8v8qcw5t4y6Qk+EpzzkDjSlgX4avA7+533hLmlNOZZyV5pWt+0V4OdHSuARxYVYemKQl6PAPKxZMSTGwSg9UMTWHEhgWdlQBo1RxxqKpYK+0w62wmWZoRNokpcjtknFS8bIaQnWqjSBJ39izPNS170wVDwn7GiRjpwPGNdPnDvi+kvG1ZnBKcya7GrmuyPhU0/hdM+5DI+acZvUcHo4sD/U8Gffg4Z77qNWWSUOzabHaPHnWt8V+cANGbG+Lb+DJQrXLfBz+bR5UacKw6TbYa2wgjWvUlA75sCH8xhmDpjtgAXw3u0mUfIeyKrgAD20c7B5bHegTHHgHdsESiHHAAFjjJKFeYWg5jaHwPlAIGK5eMMt9eBqM8x7+xbO0+NdL248AAwBK+LRaPsoZjAAAAABJRU5ErkJggg=="/>\n        &#x5728;&#x7ebf;&#x5ba2;&#x670d;\n        </a>\n        '; break }var c = y.dom.offsetLeft; var p = y.dom.offsetLeft - y.dom.clientWidth; var g = y.dom.offsetTop; var m = y.dom.offsetTop + y.dom.clientHeight; var w = 0; var b = 0; if (y.isPhone) { y.icon = y.dom.querySelector(".ics-icon") } else { y.dom.innerHTML = y.dom.innerHTML + ('\n       <div class="ics-dialog" style="display: none;\n         box-shadow: 0 0 20px 0 rgba(0,0,0,.15);\n         position: relative;\n         z-index: 1;\n         border: none;">\n         <div class="close" \n            style="position: absolute;\n            cursor: pointer;\n            right: 15px;\n            top: 15px;\n            width: 21px;\n            height: 22px;\n            z-index: 100;\n            background: url(' + y.closeIconUrl + ') center center no-repeat;"></div>\n         <div class="move"\n            style="position: absolute;\n            cursor: move;\n            width: calc(100% - 60px);\n            height: 50px;\n            "></div>\n        <iframe id="4paradigmBotIfram" style="border: none; width: 100%; height: 100%;" src="' + o + '"></iframe>\n       </div>\n      '); y.dialog = y.dom.querySelector(".ics-dialog"); y.icon = y.dom.querySelector(".ics-icon"); y.dialog.querySelector(".close").addEventListener("click", function (t) { y.hidden() }); y.dom.querySelector(".move").onmousedown = function (t) { event.preventDefault(); w = t.clientX; b = t.clientY; c = y.dom.offsetLeft; p = y.dom.offsetLeft + y.dom.clientWidth; g = y.dom.offsetTop; m = y.dom.offsetTop + y.dom.clientHeight; y.isDown = true; y.dom.style.cursor = "move" }; y.dom.querySelector(".ics-icon").onmousedown = function (t) { event.preventDefault(); w = t.clientX; b = t.clientY; c = y.dom.offsetLeft; p = y.dom.offsetLeft + y.dom.clientWidth; g = y.dom.offsetTop; m = y.dom.offsetTop + y.dom.clientHeight; y.isDown = true; y.dom.style.cursor = "move"; var i = t.clientX; var e = t.clientY; var o = i - (w - c); var n = e - (b - g); if (o > window.innerWidth / 2) { y.moveType = "left" } else { y.moveType = "right" } if (n > window.innerHeight / 2) { y.moveType1 = "top" } else { y.moveType1 = "bottom" } }; y.dom.querySelector(".move").addEventListener("mouseout", function (t) { event.preventDefault(); y.isDown = false; y.dom.style.cursor = "default" }); window.onmousemove = function (t) { if (y.isDown == false) { return } var i = t.clientX; var e = t.clientY; var o = i - (w - c); var n = e - (b - g); var s = window.innerWidth - (i - w + p); var a = window.innerHeight - (e - b + m); var l = 520; var d = 520; if (y.dom.querySelector(".ics-icon").style.display != "none") { l = y.dom.querySelector(".ics-icon").clientWidth; d = y.dom.querySelector(".ics-icon").clientHeight } var h = y.dialog && y.dialog.style.display == "block"; if (h) { if (y.moveType == "left") { if (s < 0) { s = window.innerWidth - o - l } var r = s < window.innerWidth - l ? s : window.innerWidth - l; y.dom.style.right = (r > 0 ? r : 0) + "px"; y.dom.style.left = "unset" } else { var r = o < window.innerWidth - l ? o : window.innerWidth - l; y.dom.style.left = (r > 0 ? r : 0) + "px"; y.dom.style.right = "unset" } if (y.moveType1 == "top") { if (a < 0) { a = window.innerHeight - n - d } var r = a < window.innerHeight - d ? a : window.innerHeight - d; y.dom.style.bottom = (r > 0 ? r : 0) + "px"; y.dom.style.top = "unset" } else { var r = n < window.innerHeight - d ? n : window.innerHeight - d; y.dom.style.top = (r > 0 ? r : 0) + "px"; y.dom.style.bottom = "unset" } } else { if (o > window.innerWidth / 2) { if (s < 0) { s = window.innerWidth - o - l } var r = s < window.innerWidth - l ? s : window.innerWidth - l; y.dom.style.right = (r > 0 ? r : 0) + "px"; y.dom.style.left = "unset" } else { var r = o < window.innerWidth - l ? o : window.innerWidth - l; y.dom.style.left = (r > 0 ? r : 0) + "px"; y.dom.style.right = "unset" } if (n > window.innerHeight / 2) { if (a < 0) { a = window.innerHeight - n - d } var r = a < window.innerHeight - d ? a : window.innerHeight - d; y.dom.style.bottom = (r > 0 ? r : 0) + "px"; y.dom.style.top = "unset" } else { var r = n < window.innerHeight - d ? n : window.innerHeight - d; y.dom.style.top = (r > 0 ? r : 0) + "px"; y.dom.style.bottom = "unset" } } }; window.onmouseup = function (t) { y.isDown = false; y.dom.style.cursor = "default" } } y.icon.addEventListener("click", function (t) { event.preventDefault(); if ((t.clientX != w || t.clientY != b) && !y.isPhone) { return } var i = t.clientX; var e = t.clientY; var o = i - (w - c); var n = e - (b - g); var s = window.innerWidth - (i - w + p); var a = window.innerHeight - (e - b + m); var l = 520; var d = 520; if (y.dom.querySelector(".ics-icon").style.display != "none") { l = y.dom.querySelector(".ics-icon").clientWidth; d = y.dom.querySelector(".ics-icon").clientHeight } if (o > window.innerWidth / 2) { y.moveType = "left"; if (s < 0) { s = window.innerWidth - o - l } var h = s < window.innerWidth - l ? s : window.innerWidth - l; y.dom.style.right = (h > 0 ? h : 0) + "px"; y.dom.style.left = "unset" } else { y.moveType = "right"; var h = o < window.innerWidth - l ? o : window.innerWidth - l; y.dom.style.left = (h > 0 ? h : 0) + "px"; y.dom.style.right = "unset" } if (n > window.innerHeight / 2) { y.moveType1 = "top"; if (a < 0) { a = window.innerHeight - n - d } var h = a < window.innerHeight - d ? a : window.innerHeight - d; y.dom.style.bottom = (h > 0 ? h : 0) + "px"; y.dom.style.top = "unset" } else { y.moveType1 = "bottom"; var h = n < window.innerHeight - d ? n : window.innerHeight - d; y.dom.style.top = (h > 0 ? h : 0) + "px"; y.dom.style.bottom = "unset" } y.show() }); if (y.webSetData.btnType == "1" || y.webSetData.btnType == "5") { y.icon.addEventListener("mouseenter", function (t) { y.icon.style.backgroundImage = "url(" + y.iconHoverPic + ")" }); y.icon.addEventListener("mouseleave", function (t) { y.icon.style.backgroundImage = "url(" + y.iconPic + ")" }) } y.apply(); if (n) { y.target = n; y.dom.style.position = "absolute"; n.appendChild(y.dom) } else { y.target = window.document; window.document.body.appendChild(y.dom) } window.onmessage = function (t) { if (typeof t.data === "string" && t.data.split(":")[0] === ".4paradigm.com-chat") { var i = location.origin; if (!i) { i = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ":" + window.location.port : "") } y.sendMessageToIframe("url", i); if (y.robotHead !== "") { y.sendMessageToIframe("robotHead", y.robotHead) } if (y.userHead !== "") { y.sendMessageToIframe("userHead", y.userHead) } } }; y.isInit = true; setTimeout(function (t) { y.funList.forEach(function (t) { t() }); y.funList = [] }, 100); if (y.webSetData && y.webSetData.invitation && y.webSetData.invitation["switch"]) { if (y.webSetData.invitation.outLIneSwitch) { y.createInvitation() } else { y.ajax.get(y.baseUrl + "v1/tenants/" + y.tenantId + "/humanConnections/someone/online", function (t) { console.log(t); if (t) { y.createInvitation() } }) } } }) }; t.prototype.createInvitation = function () { var e = this; if (!!this.invitation) { console.warn("é‚€è¯·æ¡†å·²å­˜åœ¨"); return } this.invitation = document.createElement("div"); this.invitation.style.zIndex = "2018"; this.invitation.style.position = "fixed"; this.invitation.style.visibility = "hidden"; this.invitation.innerHTML = '\n        <div style="position: relative">\n          <div class="close" style="position: absolute;\n          cursor: pointer; \n          left: ' + this.webSetData.invitation.closeLeft + "px;\n          right: " + this.webSetData.invitation.closeRight + "px;\n          top: " + this.webSetData.invitation.closeTop + "px;\n          bottom: " + this.webSetData.invitation.closeBottom + 'px;">\n           </div>\n           <div class="open" style="position: absolute; \n           cursor: pointer; \n           left: ' + this.webSetData.invitation.openLeft + "px;\n           right: " + this.webSetData.invitation.openRight + "px;\n           top: " + this.webSetData.invitation.openTop + "px;\n           bottom: " + this.webSetData.invitation.openBottom + 'px;">\n           </div>\n          <img src="' + this.webSetData.invitation.picUrl + '">\n        </div>\n        '; this.invitation.querySelector(".close").onclick = function () { e.invitation.style.visibility = "hidden"; if (e.webSetData.invitation && e.webSetData.invitation.reopenSwitch) { setTimeout(function (t) { e.showInvitation() }, e.webSetData.invitation.waitTime * 1e3) } }; this.invitation.querySelector(".open").onclick = function () { e.show(); e.invitation.style.visibility = "hidden" }; window.document.body.appendChild(this.invitation); setTimeout(function (t) { var i = e.invitation.getBoundingClientRect(); e.invitation.style.left = (window.innerWidth - i.width) / 2 + "px"; e.invitation.style.top = (window.innerHeight - i.height) / 2 + "px"; e.showInvitation() }, this.webSetData.invitation.firstTime * 1e3) }; t.prototype.showInvitation = function () { if (this.isPhone || this.dialog && this.dialog.style.display == "block") { return } if (this.invitation && this.webSetData.invitation.maxNum + 1 > this.invitationShowNumber) { this.invitationShowNumber++; this.invitation.style.visibility = "visible" } }; t.prototype.setName = function (t) { this.sendMessageToIframe("userName", t) }; t.prototype.setCookie = function () { this.sendMessageToIframe("setCookie", true) }; t.prototype.sendMessageToIframe = function (t, i) { var e = document.getElementById("4paradigmBotIfram"); e["contentWindow"].postMessage(".4paradigm.com-" + t + ":" + i, "*") }; t.prototype.apply = function () { if (!this.isPhone) { this.dialog.style.width = this.width || "unset"; this.dialog.style.height = this.height || "unset" } this.dom.style.left = this.left || "unset"; this.dom.style.right = this.right || "unset"; this.dom.style.top = this.top || "unset"; this.dom.style.bottom = this.bottom || "unset"; if ((this.dom.style.top === "unset" || this.dom.style.top === "") && (this.dom.style.bottom === "unset" || this.dom.style.bottom === "")) { this.dom.style.bottom = "20%" } if ((this.dom.style.left === "unset" || this.dom.style.left === "") && this.dom.style.right === "unset" || this.dom.style.right === "") { this.dom.style.right = 0 } }; t.prototype.show = function () { var i = this; if (this.isPhone) { window.open(this.url) } else { if (this.dialog) { this.invitation && (this.invitation.style.visibility = "hidden"); this.dialog.style.opacity = 0; this.dialog.style.display = "block"; this.icon.style.display = "none"; setTimeout(function (t) { i.sendMessageToIframe("show", ""); i.dialog.style.opacity = 1; i.initHeight = i.height.replace("px", ""); i.innerWidth = i.width.replace("px", ""); i.setHeight(); i.setWidth(); window.onresize = function () { i.setHeight(); i.setWidth() } }) } else { this.funList.push(this.show.bind(this)) } } }; t.prototype.setHeight = function () { var t = window.innerHeight; var i = 0; if (/%$/.test(this.dom.style.bottom)) { i = t * this.dom.style.bottom.replace("%", "") / 100 } if (/^[0-9]*$/.test(this.dom.style.bottom)) { i = this.dom.style.bottom } if (/^[0-9]*px$/.test(this.dom.style.bottom)) { i = this.dom.style.bottom.replace("px", "") } var e = 0; if (/%$/.test(this.dom.style.top)) { e = t * this.dom.style.top.replace("%", "") / 100 } if (/^[0-9]*$/.test(this.dom.style.top)) { e = this.dom.style.top } if (/^[0-9]*px$/.test(this.dom.style.top)) { e = this.dom.style.top.replace("px", "") } var o = t - e - i; if (!this.isPhone) { if (o < this.initHeight - 0) { this.dialog.style.height = o + "px"; this.dialog.style.overflow = "auto" } else { this.dialog.style.height = this.initHeight + "px" } } }; t.prototype.setWidth = function () { var t = window.innerWidth; var i = 0; if (/%$/.test(this.dom.style.left)) { i = t * this.dom.style.left.replace("%", "") / 100 } if (/^[0-9]*$/.test(this.dom.style.left)) { i = this.dom.style.left } if (/^[0-9]*px$/.test(this.dom.style.left)) { i = this.dom.style.left.replace("px", "") } var e = 0; if (/%$/.test(this.dom.style.right)) { e = t * this.dom.style.right.replace("%", "") / 100 } if (/^[0-9]*$/.test(this.dom.style.right)) { e = this.dom.style.right } if (/^[0-9]*px$/.test(this.dom.style.right)) { e = this.dom.style.right.replace("px", "") } var o = t - i - e; if (!this.isPhone) { if (o < this.innerWidth - 0) { this.dialog.style.width = o + "px"; this.dialog.style.overflow = "auto" } else { this.dialog.style.width = this.innerWidth + "px" } } }; t.prototype.hidden = function () { var i = this; if (!this.isPhone) { if (this.dialog) { this.dialog.style.display = "none"; if (this.webSetData.invitation && this.webSetData.invitation.reopenSwitch) { setTimeout(function (t) { i.showInvitation() }, this.webSetData.invitation.waitTime * 1e3) } } else { this.funList.push(this.hidden.bind(this)) } } if (this.webSetData.btnType < 2) this.icon.style.backgroundImage = "url(" + this.iconPic + ")"; this.icon.style.display = "block" }; t.prototype.hiddenAll = function () { if (!this.isPhone) { if (this.dialog) { this.dialog.style.display = "none" } else { this.funList.push(this.hiddenAll.bind(this)) } } this.icon.style.display = "none" }; return t }(); function creatIcsWebSdkJs() { var t = new MyAjax; window["IcsWebSdkJs"] = new IcsWebSdkJs(t) } creatIcsWebSdkJs();